<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Game Hub</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#020617;
  color:white;
  overflow:hidden;
}

/* Top bar */
.top-bar{
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px;
  background:#1e293b;
}

/* Buttons */
button{
  background:#334155;
  color:white;
  border:none;
  border-radius:6px;
  padding:6px 10px;
  cursor:pointer;
  transition:.2s;
}

button:hover{
  background:#3b4c66;
}

/* Game grid */
.grid{
  display:grid;
  grid-template-columns:repeat(6,1fr);
  gap:10px;
  padding:10px;
}

/* Individual game buttons */
.game{
  border-radius:12px;
  overflow:hidden;
  cursor:pointer;
  position:relative;
  background:#1e293b;
  transition:.2s;
}

.game:hover{
  transform:scale(1.05);
  box-shadow:0 0 10px rgba(56,189,248,.5);
}

.game img{
  width:100%;
  height:84%;
  object-fit:cover;
}

.title{
  height:16%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:bold;
  background:rgba(0,0,0,.6);
}

/* Game viewer */
.viewer{
  display:none;
  flex-direction:column;
  height:100vh;
}

iframe{
  flex:1;
  border:none;
}

/* Modal */
.modal{
  position:fixed;
  inset:0;
  display:none;
  background:rgba(0,0,0,.7);
  align-items:center;
  justify-content:center;
  z-index:9999;
}

.modal-box{
  background:#020617;
  padding:20px;
  border-radius:12px;
  width:300px;
  color:white;
}

.modal-box input, textarea{
  width:100%;
  margin-bottom:8px;
  padding:6px;
  background:#1e293b;
  border:none;
  color:white;
}

/* DONE button */
#doneBtn{
  position:fixed;
  top:10px;
  right:10px;
  background:#10b981;
  color:white;
  padding:10px 14px;
  border-radius:6px;
  cursor:pointer;
  display:none;
  z-index:10000;
}

#doneModal{
  position:fixed;
  inset:0;
  display:none;
  background:rgba(0,0,0,.8);
  align-items:center;
  justify-content:center;
  z-index:10001;
}

#doneModal textarea{
  width:90%;
  height:60%;
  padding:10px;
  border-radius:8px;
  border:none;
  resize:none;
  background:#1e293b;
  color:white;
}
</style>
</head>
<body>

<!-- Top bar -->
<div class="top-bar">
  <input placeholder="Search..." oninput="search(this.value)">
  <button onclick="openBuilder()">➕ Add Game</button>
</div>

<!-- Game grid -->
<div class="grid" id="grid"></div>

<!-- Game viewer -->
<div class="viewer" id="viewer">
  <div class="top-bar">
    <button onclick="back()">← Back</button>
  </div>
  <iframe id="frame"></iframe>
</div>

<!-- Add game modal -->
<div class="modal" id="builderModal">
  <div class="modal-box">
    <h3>Add Game</h3>
    <input id="bName" placeholder="Game Name">
    <input id="bURL" placeholder="Game URL">
    <input id="bImg" placeholder="Image number (1-12)">
    <button onclick="generateCode()">Generate Code</button>
    <button onclick="closeBuilder()">Close</button>
    <textarea id="codeOut" readonly placeholder="Generated code will appear here..."></textarea>
  </div>
</div>

<!-- DONE button -->
<div id="doneBtn" onclick="showDoneModal()">✅ DONE</div>

<!-- DONE modal -->
<div id="doneModal">
  <textarea id="doneText" readonly></textarea>
</div>

<script>
// Elements
const grid=document.getElementById("grid");
const viewer=document.getElementById("viewer");
const frame=document.getElementById("frame");
const builderModal=document.getElementById("builderModal");
const codeOut=document.getElementById("codeOut");
const bName=document.getElementById("bName");
const bURL=document.getElementById("bURL");
const bImg=document.getElementById("bImg");
const doneBtn=document.getElementById("doneBtn");
const doneModal=document.getElementById("doneModal");
const doneText=document.getElementById("doneText");

// Games array (images in root)
const games=[
  {t:"Block Blast",u:"https://kirbscozycavern.neocities.org/blockblast",i:"game1.png"},
  {t:"Learn to Fly 1",u:"https://script.google.com/a/macros/tiftschools.com/s/AKfycbyAW2mW4PFWaL-rMtDJgqiwL0OxsMwtBoiaFgeS_p0_f6VesYcbHDBlxoVBylXcwWrJGg/exec",i:"game2.png"},
  {t:"Learn to Fly 2",u:"https://script.google.com/a/macros/tiftschools.com/s/AKfycbyQ8tw1lAF6zuhWGKqG4hys1Jyw2DEPVK8VapKP-BZsAPqvrRgYThV1bPpT7MYzj3kdHw/exec",i:"game4.png"},
  {t:"Learn to Fly 3",u:"https://script.google.com/a/macros/tiftschools.com/s/AKfycbz8B4YTMrlWe7ul3V8pbgwG4vISWcoX71Y165LYedQWooJtMs8Ox3A9vyXUhEjCiqL-/exec",i:"game5.png"},
  {t:"Dinosaur Game",u:"https://kirbscozycavern.neocities.org/trex",i:"game3.png"},
  {t:"Stack",u:"https://kirbscozycavern.neocities.org/stack",i:"game6.png"},
  {t:"Deltarune",u:"https://kirbscozycavern.neocities.org/deltarune/",i:"game7.png"},
  {t:"Drive Mad",u:"https://kirbscozycavern.neocities.org/drivemad/drivemad",i:"game8.png"},
  {t:"Minecraft",u:"https://kirbscozycavern.neocities.org/minecraft/EaglercraftX_1.8_u50_Offline_Signed",i:"game9.png"}
];

// Render grid
function render(q=""){
  grid.innerHTML="";
  games.filter(g=>g.t.toLowerCase().includes(q.toLowerCase()))
  .forEach(g=>{
    const div=document.createElement("div");
    div.className="game";
    div.innerHTML=`<img src="${g.i}"><div class="title">${g.t}</div>`;
    div.onclick=()=>play(g);
    grid.appendChild(div);
  });
}

function search(val){render(val);}

// Play game
function play(g){
  grid.style.display="none";
  viewer.style.display="flex";
  frame.src=g.u;
}

// Back button
function back(){
  viewer.style.display="none";
  grid.style.display="grid";
  frame.src="";
}

// Builder modal
function openBuilder(){builderModal.style.display="flex";}
function closeBuilder(){builderModal.style.display="none";}

// Generate code (append to old code)
function generateCode(){
  if(!bName.value||!bURL.value||!bImg.value) return;

  const newCode = `{ t:"${bName.value}", u:"${bURL.value}", i:"game${bImg.value}.png" },`;

  if(codeOut.value.trim()===""){
    codeOut.value = newCode;
  } else {
    codeOut.value += "\n" + newCode;
  }

  // Show DONE button when at least one game is generated
  doneBtn.style.display="block";

  // Clear inputs
  bName.value="";
  bURL.value="";
  bImg.value="";
}

// DONE button function
function showDoneModal(){
  doneText.value = codeOut.value;
  doneModal.style.display="flex";
}

// Close DONE modal when clicked outside textarea
doneModal.addEventListener("click",(e)=>{
  if(e.target===doneModal){
    doneModal.style.display="none";
  }
});

// Copy DONE modal text
doneText.addEventListener("dblclick",()=>{
  navigator.clipboard.writeText(doneText.value);
  alert("Code copied to clipboard!");
});

// Init
render();
</script>

</body>
</html>
